!function r(a,s,d){function m(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return m(a[t][1][e]||e)},o,o.exports,r,a,s,d)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<d.length;e++)m(d[e]);return m}({1:[function(e,t,n){var i={};(window.setkaEditorSettingPages=i).model={Fragment:e("./model/Fragment")},i.collection={},i.view={Fragment:e("./view/Fragment")}},{"./model/Fragment":2,"./view/Fragment":3}],2:[function(e,t,n){t.exports=Backbone.Model.extend({initialize:function(){if(!this.has("id")){var e=this.getNamesRecursive();this.set("id",e.join("_"))}},getID:function(){return this.get("id")},getNamesRecursive:function(){var e=[];return this.has("parent")&&(e=this.get("parent").getNamesRecursive()),e.push(this.get("name")),e},getFragmentRole:function(){if(this.has("options")){var e=this.get("options");if(!_.isUndefined(e.attr["data-form-element-role"]))return e.attr["data-form-element-role"]}return!1}})},{}],3:[function(e,t,n){var i=window.setkaEditorSettingPages,o=jQuery;t.exports=Backbone.View.extend({fragments:{},initialize:function(){if(!this.model.has("parent")){var e="#"+this.model.get("name")+"_config",t=this.$el.find(e).val();try{var n=JSON.parse(t);this.model.set("fragments",n)}catch(e){return}finally{delete t,delete n}}n=this.model.get("fragments");_.isEmpty(n)||(_.each(n,this.initializeSubFragment,this),this.model.unset("fragments")),_.bindAll(this,"onSelectNewCondition","onConditionChanged","afterInit"),this.addEvents(),this.model.has("parent")||Backbone.trigger("setka:editor:admin:form:afterInit",this)},initializeSubFragment:function(e){e.parent=this.model;var t=new i.model.Fragment(e),n="#"+t.getID();_.isUndefined(e.options.attr["data-fragment"])?n+="_wrapper":n+="_"+e.options.attr["data-fragment"],o(n).length?this.fragments[t.get("name")]=new i.view.Fragment({model:t,el:o(n)}):this.fragments[t.get("name")]=new i.view.Fragment({model:t})},addEvents:function(){var e=this.model.getFragmentRole();if(e)switch(e){case"conditional-switcher":o("#"+this.model.getID()).click(this.onSelectNewCondition);break;case"conditional-listener":default:Backbone.on("setka:editor:admin:form:condition:changed",this.onConditionChanged)}Backbone.on("setka:editor:admin:form:afterInit",this.afterInit)},onSelectNewCondition:function(e){Backbone.trigger("setka:editor:admin:form:condition:changed",e)},onConditionChanged:function(e){var t=this.model.get("options");_.contains(t.validation_groups,e.target.value)?this.$el.show():this.$el.hide()},afterInit:function(){if("conditional-switcher"==this.model.getFragmentRole()){var e=o("#"+this.model.getID());"checked"==e.attr("checked")&&e.click()}}})},{}]},{},[1]);
//# sourceMappingURL=setting-pages.min.js.map